<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego Hexagonal en Phaser</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
       <script src="/socket.io/socket.io.js"></script> <!-- Asegúrate de que esta línea está presente -->
    <link rel="stylesheet" href="styles.css">
    <style> </style>


<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">


</head>
<body>


<!-- GAME OVER RETRY BOX !!!!!!!!! -->	
<!-- GAME OVER RETRY BOX !!!!!!!!! -->		
<!-- GAME OVER RETRY BOX !!!!!!!!! -->			
<div id="retryBox">
<div id="contentR">	
<div id="logoImg">	
<img id="topImage" src="images/hexlogo2.png" alt="Hex3" class="no-select">
</div>	
<p id="gameOverText">Game Over</p>
<p id="points">Points: 0</p>
<button id="retryButton">
<img src="images/retry.png" alt="RETRY" width="140" height="40">
</button>
</div> 
</div>
<!-- END GAME OVER RETRY BOX !!!!!!!!! -->		




<!-- HOME NAME FORM !!!!!!!!! -->
<!-- HOME NAME FORM !!!!!!!!! -->	
<!-- HOME NAME FORM !!!!!!!!! -->		
<div class="center-box">	
<form id="nameForm">


		
<!-- HOME NAME FORM !!!!!!!!! -->
<!-- HOME NAME FORM !!!!!!!!! -->	
<!-- HOME NAME FORM !!!!!!!!! -->	
<!--<label for="playerName">Introduce tu nombre:</label> -->

<!-- HOME BUTTON - PLAY, SKIN, HIGHSCORE BUTTONS !!!!!!!!! -->			
<div id="homeScreenButtons">

<div id="logoImg">	
<img id="topImage" src="hexicon2.gif" alt="Hex3" class="no-select">
</div>	

<!-- INSTRUCTIONS OF GAME !!!!!!!!! -->	
<!-- INSTRUCTIONS OF GAME !!!!!!!!! -->
<div id="greenCirlceI">
  <div>
    <svg id="greenCircle" width="0" height="22" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; ">
      <circle cx="11" cy="11" r="10" fill=" " opacity="0.8" />
    </svg>
    <p id="text"> </p>
  </div>
</div>
	
<input type="text" id="playerName" name="playerName" required placeholder="Player name" minlength="1" maxlength="20" pattern=".{1,20}">	

<div id="errorMessage" style="display: none; color: red;">The player's name must be between 1 and 20 characters.</div>	
	
	
<button type="button" id="submitButton">
<img src="images/play.png" alt="PLAY" >
</button>

<button type="button" id="customPlayer">
<img src="images/skin.png" alt="SKIN" >
</button>

<button type="button" id="highscoreButton">
<img src="images/highscore.png" alt="HIGHSCORE" >
</button>

</div>	
<!-- END HOME BUTTON - PLAY, SKIN, HIGHSCORE BUTTONS !!!!!!!!! -->			

</form>
</div>



<!-- HS BOX !!!!!!!!! -->
<!-- Hs BOX !!!!!!!!! -->		
<!-- Hs BOX !!!!!!!!! -->
<div id="highscoreDiv">	
<img src="images/highscore.png" alt="HIGHSCORE" id="texto3dImage">
<button id="closeHighscore">
<img src="images/x.png" alt="CLOSE">
</button>
<div id="scorelistS">	

<div id="scorelist">	
</div>		
	
</div>		

</div>
<!-- END Hs BOX !!!!!!!!! -->

  


<!-- SKIN BOX !!!!!!!!! -->
<!-- SKIN BOX !!!!!!!!! -->		
<!-- SKIN BOX !!!!!!!!! -->
<div id="selectSkin">	
 <img src="images/selectyourskin.png" alt="SELECT YOUR SKIN" id="texto3dImage"> 

<button id="closeSkin">
<img src="images/x.png" alt="CLOSE">
</button>	
	
<div id="skinButtons2">
<button id="paintSkin">
<img src="images/createskin.png" alt="CREATE SKIN">
</button>
</div>	
<div id="selectedSkin">	
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
<div class="skin"></div>
</div>	
<div id="skinButtons">
<button id="skinButton">
<img src="images/select.png" alt="SELECT">
</button>
</div>
</div>
<!-- END SKIN BOX !!!!!!!!! -->




<!-- PAINT CANVAS BOX !!!!!!!!! -->
<!-- PAINT CANVAS BOX !!!!!!!!! -->		
<!-- PAINT CANVAS BOX !!!!!!!!! -->			
<div id="paintBox">        
<img src="images/createyourskin.png" alt="CREATE YOUR SKIN" id="texto3dImage"> 

<button id="closePaint">
<img src="images/x.png" alt="CLOSE">
</button>	
		
<div id="canvasContainer">
<svg id="svgCanvas" width="100%" height="100%">
<circle cx="50%" cy="50%" r="50%" fill="white"/>
</svg>
</div>
<input type="color" id="colorPicker" value="#000000">
<input type="range" id="brushSize" min="1" max="20" value="2">
<button id="clearButton"><i class="fas fa-trash"></i></button>

<button id="undoButton"><i class="fas fa-undo"></i></button>
<button id="redoButton"><i class="fas fa-redo"></i></button>
<button id="fillButton"><i class="fas fa-fill"></i></button>
<button class="shapeButton" data-shape="line"><i class="fas fa-slash"></i></button>
<button class="shapeButton" data-shape="circle"><i class="fas fa-circle"></i></button>
<button class="shapeButton" data-shape="rectangle"><i class="fas fa-square"></i></button>
<button class="shapeButton" data-shape="triangle"><i class="fas fa-caret-up"></i></button>        

<div id="createPaintButton">
<button id="createPaint"><i class=""></i> 
<img src="images/create.png" alt="CREATE">
</button>
</div>
	
	
</div>
<!-- END PAINT CANVAS BOX !!!!!!!!! -->	


<!-- INSTRUCTIONS SCRIPT!!!!!!! -->	
<!-- INSTRUCTIONS SCRIPT!!!!!!! -->	
<!-- INSTRUCTIONS SCRIPT!!!!!!! -->		
<script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>





<script>

const socket = io();


console.log(socket);



anime({ targets: '#greenCircle circle', r: 6, duration: 1000, easing: 'easeInOutSine', direction: 'alternate', loop: true });
</script>	

<script>
const texts = [
{ message: "Collect green circles to grow your player", color: "#008001" },
{ message: "Boost your speed by collecting blue circles", color: "blue" },
{ message: "Compete with players worldwide", color: "" },
{ message: "Battle to stay at the top of the high score!", color: "" }
];

const circleParent = document.getElementById("greenCircle");
let currentIndex = 0;
const textElement = document.getElementById("text");
const circleElement = document.querySelector("#greenCircle circle");
function changeContent() {
textElement.classList.add("hidden");
setTimeout(() => {
currentIndex = (currentIndex + 1) % texts.length;
textElement.textContent = texts[currentIndex].message;
const existingCircle = circleParent.querySelector("circle");
if (existingCircle) {
circleParent.removeChild(existingCircle);
}

// If there's a color specified, create a new circle
if (texts[currentIndex].color !== "") {
const newCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
newCircle.setAttribute("cx", "50");
newCircle.setAttribute("cy", "50");
newCircle.setAttribute("r", "40");
newCircle.setAttribute("fill", texts[currentIndex].color);
circleParent.appendChild(newCircle);
}
textElement.classList.remove("hidden");
}, 1000); // Wait for the opacity transition to complete (1 second)
}
setInterval(changeContent, 2000);
</script>
<!-- END INSTRUCTIONS SCRIPT!!!!!!! -->	


	<script src="playerSkin.js"></script>
	<script src="lienzoFunciones.js"></script>


  <script src="hexmap.js"></script>

    <script src="game.js"></script>
    
<script>
    document.getElementById('customPlayer').addEventListener('click', function () {
document.getElementById('selectSkin').style.display = 'block';
});


//HOME HIGHScore BUTTON	
document.getElementById('highscoreButton').addEventListener('click', function () {
console.log('ENVIAR LISTA!');
socket.emit('enviarLista');
document.getElementById('highscoreDiv').style.display = 'block'; 
});

//CLOSE PAINT BUTTON	
document.getElementById('closePaint').addEventListener('click', function () {
selectSkin.style.display = 'none';
document.getElementById('paintBox').style.display = 'none';
});	

//HIGHScore Close BUTTON	
document.getElementById('closeHighscore').addEventListener('click', function () {
document.getElementById('highscoreDiv').style.display = 'none';
});

//CALL HighScore Text from SERVER!!!!!!	
//CALL HighScore Text from SERVER!!!!!!	
//CALL HighScore Text from SERVER!!!!!!	
socket.on('obtenerLista', function (jsonData) {
let hscore = jsonData;
console.log('Lista HS:', hscore);
hscore.sort((a, b) => b.score - a.score);
let topScores = hscore.slice(0, 20);
// Get the scorelist div
let scorelistDiv = document.getElementById('scorelist');
// Generate the list items
topScores.forEach((player, index) => {
let listItem = document.createElement('div');
listItem.className = 'score-item';
listItem.style.color = player.color;
listItem.textContent = `#${index + 1} ${player.name}: ${player.score}`;
scorelistDiv.appendChild(listItem);
});
}); 
</script>



</body>
</html>
